# ğŸ“Š dYdXæ•°æ®æ¥æºè¯´æ˜

**æ‰€æœ‰å…³é”®æ•°æ®ç°åœ¨100%æ¥è‡ªdYdXï¼**

---

## âœ… æ•°æ®æ¥æºç¡®è®¤

### 1ï¸âƒ£ Net Worth (èµ„äº§å‡€å€¼)

**æ¥æº**: dYdX Validatoré“¾ä¸ŠæŸ¥è¯¢

```javascript
const accountInfo = await dydxData.getAccountInfo();
// â†’ ç›´æ¥æŸ¥è¯¢dYdXé“¾ä¸Šå­è´¦æˆ·çŠ¶æ€
```

**APIè°ƒç”¨**:
```
client.validatorClient.get.getSubaccount(address, subaccountNumber)
```

**æ•°æ®**: 
- USDCä½™é¢
- æŒä»“ä¿¡æ¯
- ä¿è¯é‡‘ä½¿ç”¨æƒ…å†µ

**ç¤ºä¾‹è¾“å‡º**:
```
Net worth: $8,798.15
```

---

### 2ï¸âƒ£ Positions (æŒä»“ä¿¡æ¯)

**æ¥æº**: dYdX Validatoré“¾ä¸ŠæŸ¥è¯¢

```javascript
const positions = await dydxData.getAccountInfo();
// â†’ è¿”å›é“¾ä¸ŠçœŸå®æŒä»“
```

**æ•°æ®è§£æ**:
- Perpetual ID â†’ å¸‚åœºåç§°ï¼ˆBTC-USD, ETH-USD, etc.ï¼‰
- Quantums â†’ å®é™…æŒä»“æ•°é‡
- Side â†’ åšå¤š/åšç©º

**ç¤ºä¾‹è¾“å‡º**:
```json
{
  "ticker": "LINK",
  "side": "LONG",
  "size": 5.533,
  "market": "LINK-USD"
}
```

---

### 3ï¸âƒ£ Prices (å¸ç§ä»·æ ¼)

**æ¥æº**: dYdX Indexer Public Market API

```javascript
const price = await dydxData.getPrice('BTC');
// â†’ dYdXé“¾ä¸ŠOracleä»·æ ¼
```

**APIè°ƒç”¨**:
```
client.indexerClient.markets.getPerpetualMarkets()
```

**ç‰¹ç‚¹**:
- âœ… å…¬å¼€APIï¼ˆæ— éœ€è®¤è¯ï¼‰
- âœ… ä¸ä¼šè¢«ban
- âœ… è¿”å›é“¾ä¸ŠOracleä»·æ ¼
- âœ… å…¨çƒå¯è®¿é—®

**ç¤ºä¾‹è¾“å‡º**:
```
BTC: $77,612.30
ETH: $2,277.72
LINK: $9.55
```

---

## ğŸ”„ æ•°æ®æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    dYdX Mainnet                          â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Validator  â”‚              â”‚   Indexer    â”‚        â”‚
â”‚  â”‚   (é“¾ä¸ŠèŠ‚ç‚¹)  â”‚              â”‚ (Public API) â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                              â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                              â”‚
          â†“                              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è´¦æˆ·ä½™é¢     â”‚              â”‚  å¸‚åœºä»·æ ¼     â”‚
    â”‚ æŒä»“ä¿¡æ¯     â”‚              â”‚  Oracleä»·æ ¼   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                              â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  dydx_data.js â”‚
                  â”‚  (ç»Ÿä¸€æ¥å£)   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â†“              â†“              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Daemon  â”‚    â”‚   UI    â”‚    â”‚  API    â”‚
    â”‚ (äº¤æ˜“)  â”‚    â”‚ (æ˜¾ç¤º)  â”‚    â”‚ (æŸ¥è¯¢)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ å®ç°ç»†èŠ‚

### dydx_data.js æ¨¡å—

**æ ¸å¿ƒå‡½æ•°**:

1. **getAccountInfo()** - è´¦æˆ·ä¿¡æ¯
   ```javascript
   {
     equity: 8798.15,        // USDCä½™é¢
     positions: [...],       // æŒä»“åˆ—è¡¨
   }
   ```

2. **getAllPrices()** - æ‰€æœ‰å¸‚åœºä»·æ ¼
   ```javascript
   {
     'BTC': 77612.30,
     'ETH': 2277.72,
     ...
   }
   ```

3. **getPrice(ticker)** - å•ä¸ªå¸ç§ä»·æ ¼
   ```javascript
   77612.30
   ```

4. **getFullAccountStatus()** - å®Œæ•´çŠ¶æ€
   ```javascript
   {
     equity: 8798.15,
     usedMargin: 52.85,
     availableMargin: 8745.29,
     positions: [...],
     marketPrices: {...}
   }
   ```

---

### position_tracker.js æ¨¡å—

**ç”¨é€”**: è®°å½•å¼€ä»“ä¿¡æ¯ï¼ˆå› ä¸ºé“¾ä¸Šåªä¿å­˜å½“å‰çŠ¶æ€ï¼‰

**åŠŸèƒ½**:
- è®°å½•å¼€ä»“ä»·æ ¼å’Œæ—¶é—´
- è®¡ç®—ç›ˆäº
- å¹³ä»“ååˆ é™¤è®°å½•

**æ•°æ®æµ**:
```
å¼€ä»“æ—¶:
  dYdXé“¾ä¸Š (çœŸå®æŒä»“) + 
  position_tracker (å¼€ä»“ä»·) â†’ 
  å®Œæ•´æŒä»“ä¿¡æ¯

å¹³ä»“æ—¶:
  åˆ é™¤trackerè®°å½• â†’
  ä¿å­˜åˆ°å†å²
```

---

## ğŸš« å·²ç§»é™¤çš„ä¾èµ–

### âŒ Coinbase API
- **ä¹‹å‰**: ç”¨äºè·å–ä»·æ ¼
- **ç°åœ¨**: æ”¹ç”¨dYdX Oracleä»·æ ¼
- **åŸå› **: ç”¨æˆ·è¦æ±‚æ‰€æœ‰æ•°æ®æ¥è‡ªdYdX

### âŒ æœ¬åœ°æŒä»“ä¼°ç®—
- **ä¹‹å‰**: ä½¿ç”¨activePositionsæ•°ç»„ä¼°ç®—
- **ç°åœ¨**: ç›´æ¥æŸ¥è¯¢dYdXé“¾ä¸ŠçœŸå®æŒä»“
- **åŸå› **: ç¡®ä¿æ•°æ®å‡†ç¡®æ€§

### âŒ Indexerè´¦æˆ·API
- **ä»æœªä½¿ç”¨**: å› ä¸ºä¼šè¢«ban
- **æ›¿ä»£æ–¹æ¡ˆ**: Validatoré“¾ä¸ŠæŸ¥è¯¢

---

## ğŸ§ª éªŒè¯æ–¹æ³•

è¿è¡ŒéªŒè¯è„šæœ¬ï¼š
```bash
node verify_dydx_sources.js
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
âœ… ä»·æ ¼æ¥æº:     dYdX Indexer Public Market API
âœ… è´¦æˆ·ä½™é¢:     dYdX Validator on-chain query
âœ… æŒä»“ä¿¡æ¯:     dYdX Validator on-chain query
âœ… å®Œæ•´çŠ¶æ€:     dYdX on-chain + market data

ğŸ¯ ç”¨æˆ·è¦æ±‚å·²100%æ»¡è¶³ï¼
```

---

## ğŸ“Š å®æ—¶æ•°æ®ç¤ºä¾‹

### é“¾ä¸ŠæŸ¥è¯¢ç»“æœï¼š
```bash
$ node get_onchain_account.js

======================================================================
ğŸ“Š dYdXé“¾ä¸Šè´¦æˆ·æ•°æ®
======================================================================

åœ°å€: dydx1crq0p3qkxtk8v5hrzplu7wgtuwt0am6lnfm4je

ğŸ’° USDCä½™é¢:
----------------------------------------------------------------------
USDC (Asset 0): $8798.149498

ğŸ“ˆ æ°¸ç»­åˆçº¦æŒä»“:
----------------------------------------------------------------------

LINK-USD:
  æ–¹å‘: LONG
  æ•°é‡: 5.53316480
  Perpetual ID: 2
  åŸå§‹ quantums: 55331648

======================================================================
âœ… æ•°æ®æ¥æº: dYdXé“¾ä¸Šï¼ˆValidatorèŠ‚ç‚¹ï¼‰
âœ… æ— éœ€Indexer API
======================================================================
```

### UIæ•°æ®æ˜¾ç¤ºï¼š
```bash
$ curl http://127.0.0.1:3456/api/trade-history

{
  "equity": 8798.15,
  "usedMargin": 52.86,
  "availableMargin": 8745.29,
  "positions": [
    {
      "ticker": "LINK",
      "side": "LONG",
      "size": 5.533,
      "entryPrice": 9.539,
      "currentPrice": 9.554,
      "pnl": 0.08,
      "pnlPercent": 0.16
    }
  ],
  "onchain": true
}
```

---

## âœ… ç”¨æˆ·è¦æ±‚æ»¡è¶³ç¡®è®¤

### è¦æ±‚1: Net worthæ¥è‡ªdYdX
âœ… **æ»¡è¶³** - ç›´æ¥ä»dYdX Validatoré“¾ä¸ŠæŸ¥è¯¢USDCä½™é¢

### è¦æ±‚2: ä»“ä½ä¿¡æ¯æ¥è‡ªdYdX  
âœ… **æ»¡è¶³** - ç›´æ¥ä»dYdX Validatoré“¾ä¸ŠæŸ¥è¯¢æ°¸ç»­åˆçº¦æŒä»“

### è¦æ±‚3: å¸çš„ä»·æ ¼æ¥è‡ªdYdX
âœ… **æ»¡è¶³** - ä»dYdX Indexer Public APIè·å–Oracleä»·æ ¼

---

## ğŸ¯ ç»“è®º

**æ‰€æœ‰å…³é”®ä¿¡æ¯æ¥æºç°åœ¨100%æ¥è‡ªdYdXï¼š**

| æ•°æ®ç±»å‹ | æ¥æº | API | è®¤è¯ |
|---------|------|-----|------|
| è´¦æˆ·ä½™é¢ | dYdXé“¾ä¸Š | Validator | âœ… é’±åŒ…ç­¾å |
| æŒä»“ä¿¡æ¯ | dYdXé“¾ä¸Š | Validator | âœ… é’±åŒ…ç­¾å |
| å¸ç§ä»·æ ¼ | dYdX Oracle | Indexer Public | âŒ æ— éœ€è®¤è¯ |

**æ— é£é™©**:
- âœ… ä¸ä½¿ç”¨éœ€è¦è®¤è¯çš„Indexerè´¦æˆ·API
- âœ… ä¸ä¾èµ–ç¬¬ä¸‰æ–¹ä»·æ ¼æºï¼ˆCoinbaseç­‰ï¼‰
- âœ… æ‰€æœ‰æ•°æ®éƒ½æ˜¯çœŸå®çš„é“¾ä¸Šæ•°æ®

**æ›´æ–°æ—¶é—´**: 2026-02-02  
**éªŒè¯çŠ¶æ€**: âœ… é€šè¿‡  
**å®æ–½äººå‘˜**: OpenClaw AI Agent
